{"mappings":"A,M,yC,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,E,S,I,E,E,S,E,E,S,E,E,S,E,E,UCGA,ACIO,eCP8B,EDQnC,ICPI,EDOE,EAAY,SAAS,aAAa,CAAmB,gBACrD,EAAO,SAAS,aAAa,CAAkB,qBAEjD,EAAsB,EACtB,EAAqB,EACrB,EAAgB,GAChB,EAAwB,CAAA,EAE5B,eAAe,IACT,AAAC,EAAU,QAAQ,CAAC,MAAM,EAC5B,AAAA,EAAA,aAAY,CAAE,UAAU,GAG1B,GAAI,CACF,IAAM,EAAW,EACb,MAAM,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,EAAa,EAAO,EAAa,EAAA,eAAc,EACrD,MAAM,AAAA,CAAA,EAAA,EAAA,aAAY,AAAZ,EAAc,EAAa,EAAA,eAAc,EAEnD,EAAa,EAAS,WAAW,EAAI,EAErC,EAAU,SAAS,EAAI,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,EAAa,EAAS,OAAO,CAAE,EAAA,eAAc,CACtE,CAAE,MAAO,EAAO,CACd,AAAA,EAAA,aAAY,CAAE,KAAK,EACrB,QAAU,CACR,AAAA,EAAA,aAAY,CAAE,UAAU,EAC1B,CACF,CEjCA,AFmCa,EEnCR,gBAAgB,CAAC,SAAU,AAAA,IAC9B,EAAE,cAAc,GAEhB,IAAM,EAAQ,AFgCH,EEhCQ,aAAa,CAAmB,SAEnD,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAQ,EAAM,KAAK,CAAC,IAAI,GAEzB,GAEL,AFwBiB,CAAA,AAAA,IACjB,EAAQ,EACR,EAAc,EACd,EAAU,SAAS,CAAG,GACtB,EAAe,CAAA,EACf,GACF,CAAA,EE9BW,EACX,GDbmC,ED4Cd,UACnB,IAAI,GAEJ,GAAI,GAAe,EAAY,CAC7B,EAAe,CAAA,EACf,AAAA,EAAA,aAAY,CAAE,YAAY,GAC1B,MACF,CAEA,IACA,MAAM,IACR,ECtDI,EAAY,CAAA,EAEhB,OAAO,gBAAgB,CAAC,SAAU,UAChC,GAAM,CAAA,UAAE,CAAS,CAAA,aAAE,CAAY,CAAA,aAAE,CAAY,CAAE,CAAG,SAAS,eAAe,CAEtE,EAAY,GAAgB,EAAe,KAAO,CAAC,IACrD,EAAY,CAAA,EAEZ,MAAM,IAEN,EAAY,CAAA,EAEhB,GD4CA,IAEA,SAAS,gBAAgB,CAAC,kBAAmB,KAC3C,EAAc,EACd,EAAU,SAAS,CAAG,GACtB,EAAe,CAAA,EACf,GACF,EACF","sources":["<anon>","src/index.ts","src/ts/features/homeMoviesController.ts","src/ts/ui/scrollHandler.ts","src/ts/ui/searchHandler.ts"],"sourcesContent":["import \"./Filmovie.b3a71805.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequiref29c\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequiref29c\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRequire(\"aoHJH\");\n\nvar $dlKw0 = parcelRequire(\"dlKw0\");\n\nvar $j10sx = parcelRequire(\"j10sx\");\nfunction $dea135bc746bf624$export$6058f017353fea26(fetchCallback) {\n    let isLoading = false;\n    window.addEventListener('scroll', async ()=>{\n        const { scrollTop: scrollTop, scrollHeight: scrollHeight, clientHeight: clientHeight } = document.documentElement;\n        if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n            isLoading = true;\n            await fetchCallback();\n            isLoading = false;\n        }\n    });\n}\n\n\nfunction $cc84904ee727b232$export$a1f91be8c1bacc4e(form, callback) {\n    form.addEventListener('submit', (e)=>{\n        e.preventDefault();\n        const input = form.querySelector('input');\n        if (!input) return;\n        const query = input.value.trim();\n        if (!query) return;\n        callback(query);\n    });\n}\n\n\n\nvar $9HJaw = parcelRequire(\"9HJaw\");\n\nvar $gTSai = parcelRequire(\"gTSai\");\nfunction $90198b5983cd7822$export$849df3a0d856eb68() {\n    const filmsList = document.querySelector('.films__list');\n    const form = document.querySelector('.header__nav-form');\n    let currentPage = 1;\n    let totalPages = 1;\n    let query = '';\n    let noMoreVideos = false;\n    async function load() {\n        if (!filmsList.children.length) (0, $gTSai.notifications).showLoader();\n        try {\n            const response = query ? await (0, $dlKw0.searchMovies)(query, currentPage, (0, $9HJaw.currentLanguage)) : await (0, $dlKw0.fetchTrending)(currentPage, (0, $9HJaw.currentLanguage));\n            totalPages = response.total_pages ?? 1;\n            filmsList.innerHTML += (0, $j10sx.renderMovies)(response.results, (0, $9HJaw.currentLanguage));\n        } catch (error) {\n            (0, $gTSai.notifications).error();\n        } finally{\n            (0, $gTSai.notifications).hideLoader();\n        }\n    }\n    (0, $cc84904ee727b232$export$a1f91be8c1bacc4e)(form, (newQuery)=>{\n        query = newQuery;\n        currentPage = 1;\n        filmsList.innerHTML = '';\n        noMoreVideos = false;\n        load();\n    });\n    (0, $dea135bc746bf624$export$6058f017353fea26)(async ()=>{\n        if (noMoreVideos) return;\n        if (currentPage >= totalPages) {\n            noMoreVideos = true;\n            (0, $gTSai.notifications).noMoreMovies();\n            return;\n        }\n        currentPage++;\n        await load();\n    });\n    load();\n    document.addEventListener('languageChanged', ()=>{\n        currentPage = 1;\n        filmsList.innerHTML = '';\n        noMoreVideos = false;\n        load();\n    });\n}\n\n\n(0, $90198b5983cd7822$export$849df3a0d856eb68)();\n\n\n//# sourceMappingURL=Filmovie.2faaf4cc.js.map\n","import './main.js';\nimport { initMoviesPage } from './ts/features/homeMoviesController.js';\n\ninitMoviesPage();\n","import { fetchTrending, searchMovies } from '../api/moviesService.js';\nimport { renderMovies } from '../ui/moviesRenderer.js';\nimport { attachInfiniteScroll } from '../ui/scrollHandler.js';\nimport { attachSearch } from '../ui/searchHandler.js';\nimport { currentLanguage } from '../language.js';\nimport { notifications } from '../ui/notifications.js';\n\nexport function initMoviesPage() {\n  const filmsList = document.querySelector<HTMLUListElement>('.films__list')!;\n  const form = document.querySelector<HTMLFormElement>('.header__nav-form')!;\n\n  let currentPage: number = 1;\n  let totalPages: number = 1;\n  let query: string = '';\n  let noMoreVideos: boolean = false;\n\n  async function load() {\n    if (!filmsList.children.length) {\n      notifications.showLoader();\n    }\n\n    try {\n      const response = query\n        ? await searchMovies(query, currentPage, currentLanguage)\n        : await fetchTrending(currentPage, currentLanguage);\n\n      totalPages = response.total_pages ?? 1;\n\n      filmsList.innerHTML += renderMovies(response.results, currentLanguage);\n    } catch (error) {\n      notifications.error();\n    } finally {\n      notifications.hideLoader();\n    }\n  }\n\n  attachSearch(form, newQuery => {\n    query = newQuery;\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    noMoreVideos = false;\n    load();\n  });\n\n  attachInfiniteScroll(async () => {\n    if (noMoreVideos) return;\n\n    if (currentPage >= totalPages) {\n      noMoreVideos = true;\n      notifications.noMoreMovies();\n      return;\n    }\n\n    currentPage++;\n    await load();\n  });\n\n  load();\n\n  document.addEventListener('languageChanged', () => {\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    noMoreVideos = false;\n    load();\n  });\n}\n","export function attachInfiniteScroll(fetchCallback: () => Promise<void>): void {\n  let isLoading = false;\n\n  window.addEventListener('scroll', async () => {\n    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n    if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n      isLoading = true;\n\n      await fetchCallback();\n\n      isLoading = false;\n    }\n  });\n}\n","export function attachSearch(form: HTMLFormElement, callback: (query: string) => void) {\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const input = form.querySelector<HTMLInputElement>('input');\n\n    if (!input) return;\n\n    const query = input.value.trim();\n\n    if (!query) return;\n\n    callback(query);\n  });\n}\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$dlKw0","$j10sx","$9HJaw","$gTSai","fetchCallback","isLoading","filmsList","document","querySelector","form","currentPage","totalPages","query","noMoreVideos","load","children","length","notifications","showLoader","response","searchMovies","currentLanguage","fetchTrending","total_pages","innerHTML","renderMovies","results","error","hideLoader","addEventListener","e","preventDefault","input","value","trim","callback","newQuery","noMoreMovies","window","scrollTop","scrollHeight","clientHeight","documentElement"],"version":3,"file":"Filmovie.2faaf4cc.js.map"}