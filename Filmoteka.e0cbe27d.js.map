{"mappings":"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","sources":["<anon>","src/index.ts","src/ts/features/moviesController.ts","src/ts/api/moviesService.ts","src/ts/ui/moviesRenderer.ts","src/types and data/genres.ts","src/ts/ui/scrollHandler.ts","src/ts/ui/searchHandler.ts"],"sourcesContent":["import \"./library.d17c0ffb.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired76b\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired76b\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRequire(\"aoHJH\");\n\nvar $jz0No = parcelRequire(\"jz0No\");\nasync function $a030ad073cf13366$export$366c886a9138e8db(page, language) {\n    const { data: data } = await (0, $jz0No.tmdbClient).get('trending/movie/day', {\n        params: {\n            page: page,\n            language: language\n        }\n    });\n    return data.results;\n}\nasync function $a030ad073cf13366$export$b0c4d3ac9887d994(query, page, language) {\n    const { data: data } = await (0, $jz0No.tmdbClient).get('search/movie', {\n        params: {\n            query: query,\n            page: page,\n            language: language\n        }\n    });\n    return data.results;\n}\n\n\nconst $701d256b703b94e7$export$7f09bdb22c267a70 = new Map([\n    [\n        28,\n        {\n            en: 'Action',\n            pl: 'Akcja'\n        }\n    ],\n    [\n        12,\n        {\n            en: 'Adventure',\n            pl: 'Przygoda'\n        }\n    ],\n    [\n        16,\n        {\n            en: 'Animation',\n            pl: 'Animacja'\n        }\n    ],\n    [\n        35,\n        {\n            en: 'Comedy',\n            pl: 'Komedia'\n        }\n    ],\n    [\n        80,\n        {\n            en: 'Crime',\n            pl: \"Krymina\\u0142\"\n        }\n    ],\n    [\n        99,\n        {\n            en: 'Documentary',\n            pl: 'Dokument'\n        }\n    ],\n    [\n        18,\n        {\n            en: 'Drama',\n            pl: 'Dramat'\n        }\n    ],\n    [\n        10751,\n        {\n            en: 'Family',\n            pl: 'Familijny'\n        }\n    ],\n    [\n        14,\n        {\n            en: 'Fantasy',\n            pl: 'Fantasy'\n        }\n    ],\n    [\n        36,\n        {\n            en: 'History',\n            pl: 'Historyczny'\n        }\n    ],\n    [\n        27,\n        {\n            en: 'Horror',\n            pl: 'Horror'\n        }\n    ],\n    [\n        10402,\n        {\n            en: 'Music',\n            pl: 'Muzyczny'\n        }\n    ],\n    [\n        9648,\n        {\n            en: 'Mystery',\n            pl: 'Tajemniczy'\n        }\n    ],\n    [\n        10749,\n        {\n            en: 'Romance',\n            pl: 'Romans'\n        }\n    ],\n    [\n        878,\n        {\n            en: 'Science Fiction',\n            pl: 'Science Fiction'\n        }\n    ],\n    [\n        10770,\n        {\n            en: 'TV Movie',\n            pl: 'Film telewizyjny'\n        }\n    ],\n    [\n        53,\n        {\n            en: 'Thriller',\n            pl: 'Romans'\n        }\n    ],\n    [\n        10752,\n        {\n            en: 'War',\n            pl: 'Wojenny'\n        }\n    ],\n    [\n        37,\n        {\n            en: 'Western',\n            pl: 'Western'\n        }\n    ]\n]);\nfunction $701d256b703b94e7$export$e1e489d92e562b7b(id, language) {\n    const genreId = $701d256b703b94e7$export$7f09bdb22c267a70.get(id);\n    return language === 'pl-PL' ? genreId?.pl ?? 'Nieznany' : genreId?.en ?? 'Unknown';\n}\n\n\nfunction $c74f50f51a8bcaf9$export$1a30573fde3dfc62(movies, language) {\n    return movies.map((movie)=>{\n        const roundedVoteAverage = Math.round(movie.vote_average * 10) / 10;\n        const genreNames = movie.genre_ids.map((genreId)=>(0, $701d256b703b94e7$export$e1e489d92e562b7b)(genreId, language));\n        const imagePath = movie.backdrop_path ? `https://image.tmdb.org/t/p/w500${encodeURIComponent(movie.backdrop_path)}` : 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Image_not_available.png/640px-Image_not_available.png';\n        return `<li class=\"films__list-item\" data-id=\"${movie.id}\">\n       <img src=\"${imagePath}\" alt=\"${movie.title}\" />\n        <h2>${movie.title}</h2>\n        <p>${genreNames.slice(0, 2).join(', ')} | <span>${movie.release_date.substring(0, 4)}</span>\n        <span class=\"films__list-item--rating\">${roundedVoteAverage}</span></p>\n      </li>`;\n    }).join('');\n}\n\n\nfunction $dea135bc746bf624$export$6058f017353fea26(fetchCallback) {\n    let isLoading = false;\n    window.addEventListener('scroll', async ()=>{\n        const { scrollTop: scrollTop, scrollHeight: scrollHeight, clientHeight: clientHeight } = document.documentElement;\n        if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n            isLoading = true;\n            await fetchCallback();\n            isLoading = false;\n        }\n    });\n}\n\n\nfunction $cc84904ee727b232$export$a1f91be8c1bacc4e(form, callback) {\n    form.addEventListener('submit', (e)=>{\n        e.preventDefault();\n        const input = form.querySelector('input');\n        if (!input) return;\n        const query = input.value.trim();\n        if (!query) return;\n        callback(query);\n    });\n}\n\n\n\nvar $9HJaw = parcelRequire(\"9HJaw\");\nconst $72d7bfaf0a0786a2$var$filmsList = document.querySelector('.films__list');\nconst $72d7bfaf0a0786a2$var$form = document.querySelector('.header__nav-form');\nfunction $72d7bfaf0a0786a2$export$849df3a0d856eb68() {\n    let currentPage = 1;\n    let query = '';\n    async function load() {\n        const movies = query ? await (0, $a030ad073cf13366$export$b0c4d3ac9887d994)(query, currentPage, (0, $9HJaw.currentLanguage)) : await (0, $a030ad073cf13366$export$366c886a9138e8db)(currentPage, (0, $9HJaw.currentLanguage));\n        $72d7bfaf0a0786a2$var$filmsList.innerHTML += (0, $c74f50f51a8bcaf9$export$1a30573fde3dfc62)(movies, (0, $9HJaw.currentLanguage));\n    }\n    (0, $cc84904ee727b232$export$a1f91be8c1bacc4e)($72d7bfaf0a0786a2$var$form, (newQuery)=>{\n        query = newQuery;\n        currentPage = 1;\n        $72d7bfaf0a0786a2$var$filmsList.innerHTML = '';\n        load();\n    });\n    (0, $dea135bc746bf624$export$6058f017353fea26)(async ()=>{\n        currentPage++;\n        await load();\n    });\n    load();\n    document.addEventListener('languageChanged', ()=>{\n        currentPage = 1;\n        $72d7bfaf0a0786a2$var$filmsList.innerHTML = '';\n        load();\n    });\n}\n\n\n(0, $72d7bfaf0a0786a2$export$849df3a0d856eb68)();\n\n\n//# sourceMappingURL=Filmoteka.e0cbe27d.js.map\n","import './main.js';\nimport { initMoviesPage } from './ts/features/moviesController.js';\n\ninitMoviesPage();\n","import { fetchTrending, searchMovies } from '../api/moviesService.js';\nimport { renderMovies } from '../ui/moviesRenderer.js';\nimport { attachInfiniteScroll } from '../ui/scrollHandler.js';\nimport { attachSearch } from '../ui/searchHandler.js';\nimport { currentLanguage } from '../language.js';\n\nconst filmsList = document.querySelector<HTMLUListElement>('.films__list')!;\nconst form = document.querySelector<HTMLFormElement>('.header__nav-form')!;\n\nexport function initMoviesPage() {\n  let currentPage = 1;\n  let query = '';\n\n  async function load() {\n    const movies = query\n      ? await searchMovies(query, currentPage, currentLanguage)\n      : await fetchTrending(currentPage, currentLanguage);\n\n    filmsList.innerHTML += renderMovies(movies, currentLanguage);\n  }\n\n  attachSearch(form, newQuery => {\n    query = newQuery;\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    load();\n  });\n\n  attachInfiniteScroll(async () => {\n    currentPage++;\n    await load();\n  });\n\n  load();\n\n  document.addEventListener('languageChanged', () => {\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    load();\n  });\n}\n","import { tmdbClient } from './tmdbApi.js';\nimport type { MovieResponse } from '../../types and data/types.js';\n\n// FETCH TRENDING\nexport async function fetchTrending(page: number, language: string) {\n  const { data } = await tmdbClient.get<MovieResponse>('trending/movie/day', {\n    params: { page, language },\n  });\n\n  return data.results;\n}\n\n// SEARCH BAR\nexport async function searchMovies(query: string, page: number, language: string) {\n  const { data } = await tmdbClient.get<MovieResponse>('search/movie', {\n    params: { query, page, language },\n  });\n\n  return data.results;\n}\n","import type { Movie } from '../../types and data/types.js';\nimport { getGenreName } from '../../types and data/genres.js';\n\nexport function renderMovies(movies: Movie[], language: 'en-US' | 'pl-PL'): string {\n  return movies\n    .map(movie => {\n      const roundedVoteAverage = Math.round(movie.vote_average * 10) / 10;\n      const genreNames = movie.genre_ids.map(genreId => getGenreName(genreId, language));\n      const imagePath = movie.backdrop_path\n        ? `https://image.tmdb.org/t/p/w500${encodeURIComponent(movie.backdrop_path)}`\n        : 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Image_not_available.png/640px-Image_not_available.png';\n\n      return `<li class=\"films__list-item\" data-id=\"${movie.id}\">\n       <img src=\"${imagePath}\" alt=\"${movie.title}\" />\n        <h2>${movie.title}</h2>\n        <p>${genreNames.slice(0, 2).join(', ')} | <span>${movie.release_date.substring(0, 4)}</span>\n        <span class=\"films__list-item--rating\">${roundedVoteAverage}</span></p>\n      </li>`;\n    })\n    .join('');\n}\n","export const genresMap = new Map<number, { en: string; pl: string }>([\n  [28, { en: 'Action', pl: 'Akcja' }],\n  [12, { en: 'Adventure', pl: 'Przygoda' }],\n  [16, { en: 'Animation', pl: 'Animacja' }],\n  [35, { en: 'Comedy', pl: 'Komedia' }],\n  [80, { en: 'Crime', pl: 'KryminaÅ‚' }],\n  [99, { en: 'Documentary', pl: 'Dokument' }],\n  [18, { en: 'Drama', pl: 'Dramat' }],\n  [10751, { en: 'Family', pl: 'Familijny' }],\n  [14, { en: 'Fantasy', pl: 'Fantasy' }],\n  [36, { en: 'History', pl: 'Historyczny' }],\n  [27, { en: 'Horror', pl: 'Horror' }],\n  [10402, { en: 'Music', pl: 'Muzyczny' }],\n  [9648, { en: 'Mystery', pl: 'Tajemniczy' }],\n  [10749, { en: 'Romance', pl: 'Romans' }],\n  [878, { en: 'Science Fiction', pl: 'Science Fiction' }],\n  [10770, { en: 'TV Movie', pl: 'Film telewizyjny' }],\n  [53, { en: 'Thriller', pl: 'Romans' }],\n  [10752, { en: 'War', pl: 'Wojenny' }],\n  [37, { en: 'Western', pl: 'Western' }],\n]);\n\nexport function getGenreName(id: number, language: 'en-US' | 'pl-PL') {\n  const genreId = genresMap.get(id);\n\n  return language === 'pl-PL' ? (genreId?.pl ?? 'Nieznany') : (genreId?.en ?? 'Unknown');\n}\n","interface InfiniteScrollOptions {\n  fetchCallback: (page: number, query?: string) => void;\n  currentPage: number;\n  searchQuery?: string;\n  isLoading?: boolean;\n  noMoreMovies?: boolean;\n}\n\nexport function attachInfiniteScroll(fetchCallback: () => Promise<void>): void {\n  let isLoading = false;\n\n  window.addEventListener('scroll', async () => {\n    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n    if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n      isLoading = true;\n\n      await fetchCallback();\n\n      isLoading = false;\n    }\n  });\n}\n","export function attachSearch(form: HTMLFormElement, callback: (query: string) => void) {\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const input = form.querySelector<HTMLInputElement>('input');\n\n    if (!input) return;\n\n    const query = input.value.trim();\n\n    if (!query) return;\n\n    callback(query);\n  });\n}\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$jz0No","$a030ad073cf13366$export$366c886a9138e8db","page","language","data","tmdbClient","get","params","results","$a030ad073cf13366$export$b0c4d3ac9887d994","query","$701d256b703b94e7$export$7f09bdb22c267a70","Map","en","pl","$9HJaw","$72d7bfaf0a0786a2$var$filmsList","document","querySelector","$72d7bfaf0a0786a2$var$form","fetchCallback","isLoading","currentPage","load","movies","currentLanguage","innerHTML","map","movie","roundedVoteAverage","Math","round","vote_average","genreNames","genre_ids","genreId","imagePath","backdrop_path","encodeURIComponent","title","slice","join","release_date","substring","form","addEventListener","e","preventDefault","input","value","trim","callback","newQuery","window","scrollTop","scrollHeight","clientHeight","documentElement"],"version":3,"file":"Filmoteka.e0cbe27d.js.map"}