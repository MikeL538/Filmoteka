{"mappings":"A,M,0C,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,E,S,I,E,E,S,E,E,S,E,E,S,E,E,SEOA,IAAM,EAAY,SAAS,aAAa,CAAmB,gBACrD,EAAO,SAAS,aAAa,CAAkB,sBDLrD,ACOO,eCF8B,EDGnC,ICFI,EDEA,EAAc,EACd,EAAQ,GAEZ,eAAe,IACb,IAAM,EAAS,EACX,MAAM,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,EAAa,EAAO,EAAa,EAAA,eAAc,EACrD,MAAM,AAAA,CAAA,EAAA,EAAA,aAAY,AAAZ,EAAc,EAAa,EAAA,eAAc,CAEnD,CAAA,EAAU,SAAS,EAAI,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,EAAa,EAAQ,EAAA,eAAc,CAC5D,CEnBA,AFqBa,EErBR,gBAAgB,CAAC,SAAU,AAAA,IAC9B,EAAE,cAAc,GAEhB,IAAM,EAAQ,AFkBH,EElBQ,aAAa,CAAmB,SAEnD,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAQ,EAAM,KAAK,CAAC,IAAI,GAEzB,GAEL,AFUiB,CAAA,AAAA,IACjB,EAAQ,EACR,EAAc,EACd,EAAU,SAAS,CAAG,GACtB,GACF,CAAA,EEfW,EACX,GDLmC,EDqBd,UAEf,GAAA,GAAY,OAAO,CAAC,MAAM,CAAG,IAAI,AAAA,EAAA,aAAY,CAAE,YAAY,GAC/D,MAAM,GACR,ECxBI,EAAY,CAAA,EAEhB,OAAO,gBAAgB,CAAC,SAAU,UAChC,GAAM,CAAA,UAAE,CAAS,CAAA,aAAE,CAAY,CAAA,aAAE,CAAY,CAAE,CAAG,SAAS,eAAe,CAEtE,EAAY,GAAgB,EAAe,KAAO,CAAC,IACrD,EAAY,CAAA,EAEZ,MAAM,IAEN,EAAY,CAAA,EAEhB,GDcA,IAEA,SAAS,gBAAgB,CAAC,kBAAmB,KAC3C,EAAc,EACd,EAAU,SAAS,CAAG,GACtB,GACF,EACF","sources":["<anon>","src/index.ts","src/ts/features/homeMoviesController.ts","src/ts/ui/scrollHandler.ts","src/ts/ui/searchHandler.ts"],"sourcesContent":["import \"./Filmoteka.2c7a04a5.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired76b\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired76b\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRequire(\"aoHJH\");\n\nvar $dlKw0 = parcelRequire(\"dlKw0\");\n\nvar $j10sx = parcelRequire(\"j10sx\");\nfunction $dea135bc746bf624$export$6058f017353fea26(fetchCallback) {\n    let isLoading = false;\n    window.addEventListener('scroll', async ()=>{\n        const { scrollTop: scrollTop, scrollHeight: scrollHeight, clientHeight: clientHeight } = document.documentElement;\n        if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n            isLoading = true;\n            await fetchCallback();\n            isLoading = false;\n        }\n    });\n}\n\n\nfunction $cc84904ee727b232$export$a1f91be8c1bacc4e(form, callback) {\n    form.addEventListener('submit', (e)=>{\n        e.preventDefault();\n        const input = form.querySelector('input');\n        if (!input) return;\n        const query = input.value.trim();\n        if (!query) return;\n        callback(query);\n    });\n}\n\n\n\nvar $9HJaw = parcelRequire(\"9HJaw\");\n\nvar $gTSai = parcelRequire(\"gTSai\");\nconst $90198b5983cd7822$var$filmsList = document.querySelector('.films__list');\nconst $90198b5983cd7822$var$form = document.querySelector('.header__nav-form');\nfunction $90198b5983cd7822$export$849df3a0d856eb68() {\n    let currentPage = 1;\n    let query = '';\n    async function load() {\n        const movies = query ? await (0, $dlKw0.searchMovies)(query, currentPage, (0, $9HJaw.currentLanguage)) : await (0, $dlKw0.fetchTrending)(currentPage, (0, $9HJaw.currentLanguage));\n        $90198b5983cd7822$var$filmsList.innerHTML += (0, $j10sx.renderMovies)(movies, (0, $9HJaw.currentLanguage));\n    }\n    (0, $cc84904ee727b232$export$a1f91be8c1bacc4e)($90198b5983cd7822$var$form, (newQuery)=>{\n        query = newQuery;\n        currentPage = 1;\n        $90198b5983cd7822$var$filmsList.innerHTML = '';\n        load();\n    });\n    (0, $dea135bc746bf624$export$6058f017353fea26)(async ()=>{\n        currentPage++;\n        if (currentPage.valueOf.length > 20) (0, $gTSai.notifications).noMoreMovies();\n        await load();\n    });\n    load();\n    document.addEventListener('languageChanged', ()=>{\n        currentPage = 1;\n        $90198b5983cd7822$var$filmsList.innerHTML = '';\n        load();\n    });\n}\n\n\n(0, $90198b5983cd7822$export$849df3a0d856eb68)();\n\n\n//# sourceMappingURL=Filmoteka.ceea4134.js.map\n","import './main.js';\nimport { initMoviesPage } from './ts/features/homeMoviesController.js';\n\ninitMoviesPage();\n","import { fetchTrending, searchMovies } from '../api/moviesService.js';\nimport { renderMovies } from '../ui/moviesRenderer.js';\nimport { attachInfiniteScroll } from '../ui/scrollHandler.js';\nimport { attachSearch } from '../ui/searchHandler.js';\nimport { currentLanguage } from '../language.js';\nimport { notifications } from '../ui/notifications.js';\n\nconst filmsList = document.querySelector<HTMLUListElement>('.films__list')!;\nconst form = document.querySelector<HTMLFormElement>('.header__nav-form')!;\n\nexport function initMoviesPage() {\n  let currentPage = 1;\n  let query = '';\n\n  async function load() {\n    const movies = query\n      ? await searchMovies(query, currentPage, currentLanguage)\n      : await fetchTrending(currentPage, currentLanguage);\n\n    filmsList.innerHTML += renderMovies(movies, currentLanguage);\n  }\n\n  attachSearch(form, newQuery => {\n    query = newQuery;\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    load();\n  });\n\n  attachInfiniteScroll(async () => {\n    currentPage++;\n    if (currentPage.valueOf.length > 20) notifications.noMoreMovies();\n    await load();\n  });\n\n  load();\n\n  document.addEventListener('languageChanged', () => {\n    currentPage = 1;\n    filmsList.innerHTML = '';\n    load();\n  });\n}\n","interface InfiniteScrollOptions {\n  fetchCallback: (page: number, query?: string) => void;\n  currentPage: number;\n  searchQuery?: string;\n  isLoading?: boolean;\n  noMoreMovies?: boolean;\n}\n\nexport function attachInfiniteScroll(fetchCallback: () => Promise<void>): void {\n  let isLoading = false;\n\n  window.addEventListener('scroll', async () => {\n    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n    if (scrollTop + clientHeight >= scrollHeight - 700 && !isLoading) {\n      isLoading = true;\n\n      await fetchCallback();\n\n      isLoading = false;\n    }\n  });\n}\n","export function attachSearch(form: HTMLFormElement, callback: (query: string) => void) {\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const input = form.querySelector<HTMLInputElement>('input');\n\n    if (!input) return;\n\n    const query = input.value.trim();\n\n    if (!query) return;\n\n    callback(query);\n  });\n}\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$dlKw0","$j10sx","$9HJaw","$gTSai","$90198b5983cd7822$var$filmsList","document","querySelector","$90198b5983cd7822$var$form","fetchCallback","isLoading","currentPage","query","load","movies","searchMovies","currentLanguage","fetchTrending","innerHTML","renderMovies","form","addEventListener","e","preventDefault","input","value","trim","callback","newQuery","valueOf","length","notifications","noMoreMovies","window","scrollTop","scrollHeight","clientHeight","documentElement"],"version":3,"file":"Filmoteka.ceea4134.js.map"}